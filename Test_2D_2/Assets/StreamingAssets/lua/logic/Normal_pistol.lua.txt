local ResourceMgr = require("ResourceManager")
local PathMgr = require("PathManager")

local Normal_pistol=Class("Normal_pistol", require("Weapon_base"))

function Normal_pistol:cotr()

    --self.

    self.demage = 10
    --- 拥有子弹总数
    self.totalAmmoACount=100
    --- 一弹夹子弹数量
    self.clipsAmmoCount=10
    --- 当前子弹数量
    self.currentAmmoACount=10
    --- 射击冷却时间
    self.shootCDTime =0.5
    --- 装弹时间
    self.reloadTime=1

    self.Type = WeaponType.normal_pistol
end

function Normal_pistol:Shoot()
    local bullet, isNew = ResourceMgr:GetGameObject(PathMgr.ResourcePath.Bullet_1)
    if isNew then
        local collisionClass = bullet:GetComponent("Collision")
        if collisionClass.CollisionHandle then
            collisionClass.CollisionHandle = collisionClass.CollisionHandle + Normal_pistol.OnCollision
        else
            collisionClass.CollisionHandle = Normal_pistol.OnCollision
        end
    end
end

function Normal_pistol:OnCollision(type, other)
    if type == "TriggerEnter2D" and other.gameObject.layer == 9 then
        ResourceMgr:DestroyObject(self.gameObject)
    end
end

return Normal_pistol